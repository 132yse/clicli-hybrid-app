<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dplayer/1.25.0/DPlayer.min.css" />
    <style>
        /*[v-cloak] {
            display: none;
        }*/

        html,
        body {
            background-color: #ECECEC;
            padding: 0;
            margin: 0;
            padding-top: 30px;
        }
        /*导航栏样式*/

        #header {
            position: fixed;
            height: 50px;
            z-index: 10;
            top: 25px;
            left: 0;
            right: 0;
            padding-left: 10px;
            padding-right: 10px;
            background-color: #FEFEFE;
        }

        .close-animation {
            animation: close 0.3s linear forwards;
        }

        .open-animation {
            animation: open 0.3s linear forwards;
        }

        @keyframes close {
            from {
                top: 25px;
            }
            to {
                top: -50px;
            }
        }

        @keyframes open {
            from {
                top: -50px;
            }
            to {
                top: 25px;
            }
        }

        #header img {
            height: 20px;
            width: 20px;
            padding: 15px;
            float: left;
        }

        #header img:active {
            background-color: #ddd;
        }

        #header p {
            right: 56px;
            left: 56px;
            display: inline-block;
            overflow: hidden;
            width: auto;
            margin: 0;
            padding: 0;
            text-overflow: ellipsis;
            line-height: 50px;
            position: absolute;
            text-align: center;
            white-space: nowrap;
            color: #515151;
            font-size: 20px;
        }

        .onclass-flag {
            background-color: #7057FF;
            color: #fff;
            font-size: 16px;
            line-height: 24px;
            height: 24px;
            border-radius: 5px;
            padding: 0 10px;
        }

        .content-container {
            padding: 20px 20px;
            background-color: #ECECEC;
            display: flex;
            flex-direction: row;
            align-items: center;
            flex-wrap: wrap;
        }

        .img-item {
            position: relative;
            margin-bottom: 20px;
            background-color: #ddd;
            width: 100%;
            background-image: url('../../image/commentsbg.gif');
            /*box-shadow: 4px 4px 8px #ddd;*/
        }

        .img-index {
            position: absolute;
            top: 20;
            left: 10;
            background-color: rgba(0, 0, 0, 0.2);
            color: #fff;
            padding: 2px 4px;
        }

        .img-content {
            width: 100%;
            height: 100%;
        }

        video {
            padding-top: 20px;
            width: 100vw;
            height: 56.25vw;
        }
    </style>
</head>

<body>

    <div id="app" v-cloak>
        <!-- 我是占位状态栏高度的 -->
        <div class="statusBarPlaceholder" style="height:25px;width:100%;background-color:#FEFEFE;position:fixed;top:0;z-index:99999"></div>
        <!-- 我是导航栏 -->
        <header id="header">
            <img class="close" src="../../image/close.png" @click="goBack">
            <p class="title">{{pptName}}&nbsp;&nbsp;&nbsp;&nbsp;<span class="onclass-flag" v-show="pptOnclassFlag">上课中<span></p>
        </header>

        <!-- <video src="https://gss3.baidu.com/6LZ0ej3k1Qd3ote6lo7D0j9wehsv/tieba-smallvideo/3_8a43e5e4436b875a233c426f22bab4c4.mp4"
         controls="controls" poster="https://raw.githubusercontent.com/mqttjs/MQTT.js/137ee0e3940c1f01049a30248c70f24dc6e6f829/MQTT.js.png"></video> -->

        <div class="content-container">

            <div class="img-item" v-for="item in pageList">
                <span class="img-index">{{item.page_num}} / {{pptCount}}</span>
                <img :src="item.page_url" alt="" class="img-content">
            </div>

        </div>
    </div>

    <script src="../../script/api.js"></script>
    <script src="../../script/vue.min.js"></script>
    <script src="../../script/xgplayer.js" charset="utf-8"></script>
    <script type="text/javascript">
        apiready = () => {
            let pptId = api.pageParam.pptId
            let pptName = api.pageParam.pptName
            let pptOnclassFlag = api.pageParam.pptOnclassFlag

            var videoPlayer = api.require('videoPlayer');
            videoPlayer.open({
                path: 'https://gss3.baidu.com/6LZ0ej3k1Qd3ote6lo7D0j9wehsv/tieba-smallvideo/3_8a43e5e4436b875a233c426f22bab4c4.mp4',
                scalingMode:'scaleToFill',
                autoPlay: true,
                rect: {
                    x: 0,
                    y: 75,
                    w: api.winWidth,
                    h: 9/16*api.winWidth
                },
                coverImg: '',
                fixed: true,
            }, function(ret, err) {
                if (ret.status) {
                    alert(JSON.stringify(ret));
                } else {
                    alert(JSON.stringify(err));
                }
            });
            const app = new Vue({
                el: "#app",
                data: {
                    pptId: pptId,
                    pptName: pptName,
                    pptOnclassFlag: pptOnclassFlag,

                    pptCount: 4,
                    createTime: "2019-1-30 18:30",
                    pageList: [{
                        "page_id": 1,
                        "page_num": 1,
                        "page_url": "https://i.loli.net/2018/10/07/5bb8f35ec4744.jpg"
                    }, {
                        "page_id": 2,
                        "page_num": 2,
                        "page_url": "https://i.loli.net/2018/10/07/5bb8f60026cea.jpg"
                    }, {
                        "page_id": 3,
                        "page_num": 3,
                        "page_url": "https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike272%2C5%2C5%2C272%2C90/sign=cbb11d8401d79123f4ed9c26cc5d32e7/b8389b504fc2d56284049d61ea1190ef76c66c29.jpg"
                    }, {
                        "page_id": 4,
                        "page_num": 4,
                        "page_url": "https://gss0.bdstatic.com/-4o3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike150%2C5%2C5%2C150%2C50/sign=1fd3d1546fd9f2d3341c2cbdc885e176/0d338744ebf81a4c3528027cda2a6059252da669.jpg"
                    }, ]
                },
                mounted() {
                    // let header = document.querySelector('header')
                    // let appBox = document.querySelector('#app')
                    // appBox.addEventListener('touchstart', function(e) {
                    //     startX = e.touches[0].pageX;
                    //     startY = e.touches[0].pageY;
                    // });
                    // appBox.addEventListener('touchmove', function(e) {
                    //     moveEndX = e.changedTouches[0].pageX;
                    //     moveEndY = e.changedTouches[0].pageY;
                    //     X = moveEndX - startX;
                    //     Y = moveEndY - startY;
                    //     if (X > 0 && Math.abs(X) > 100*Math.abs(Y)) {
                    //         console.log('向右');
                    //     } else if (X < 0 && Math.abs(X) > 100*Math.abs(Y)) {
                    //         console.log('向左');
                    //     } else if (Y > 0 && 100*Math.abs(Y) > Math.abs(X)) {
                    //         console.log('向下');
                    //         //向下显示页面导航栏
                    //         header.className = " "
                    //         header.className = " open-animation"
                    //     } else if (Y < 0 && 100*Math.abs(Y) > Math.abs(X)) {
                    //         console.log('向上');
                    //         //向上隐藏页面导航栏
                    //         header.className = " "
                    //         header.className = " close-animation"
                    //     } else {
                    //         console.log('没滑动');
                    //     }
                    // });

                },
                methods: {
                    goBack() {
                        //传递事件 课件关闭标志
                        api.sendEvent({
                            name: 'changeCoursewareStatus',
                            extra: {
                                openFlag: 0,
                                onFront: 0
                            }
                        });
                        api.closeWin({
                            name: ''
                        });

                    }
                }
            })

        }
    </script>
</body>

</html>
